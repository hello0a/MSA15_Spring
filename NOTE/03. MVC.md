# MVC
- 요청 경로 매핑
- Model ( 뷰에서 사용할 데이터 )
- 응답처리
- 요청처리

## 요청경로 매핑
@Controller  : 적절한 모델과 적절한 뷰 선정
@RequestMapping(value="/경로", method=RequestMethod.메서드)
- @GetMapping("/경로")
- @PostMapping("/경로")
- @PutMapping("/경로")
- @DeleteMapping("/경로")

* 주요 속성
- value : 요청 경로
- method : HTTP 메서드(Get, Post, Put, Delete)
- params : 요청 파라미터 조건
- headers : 요청 헤더 조건
- consumes : 요청 콘텐츠 타입 조건 (Content-Type)
- produces : 응답 콘텐츠 타입 조건 (Accept)

@PathVariable("변수명") : 경로 변수 매핑
    (ex : /user/{id} -> @PathVariable("id") String id)
    {변수명} = ("변수명") but 타입 변수명(다른 이름OK)
@RequestParam("파라미터명") : 요청 파라미터 매핑
    (ex : /search?query=java -> @RequestParam("query") String query)
    ?파라미터명 = ("파라미터명") but 타입 변수명(다른 이름OK)

## Model
: 뷰에서 사용할 데이터를 담는 객체

1. 모델에 데이터 등록하기
- 컨트롤러 메서드에 Model 매개변수 추가
    (Model model)   
- model.addAttribute("속성명", 값) 메서드 호출
- 뷰에서 모델 데이터 사용하기
    * Thymeleaf
    <th:block th:text="${속성명}"></th:block> -> html 속성 없을 때
    <h1 th:text="${속성명}"></h1> -> html 속성 있을 때
    <input type="text" th:value="${객체.변수명}"/>
    <img th:src="@{${속성명}}"/> -> @{} : URL 링크 표현식
    즉, th 붙이면 모델에 등록한 데이터 가져오기 가능

    * 특별한 의미의 속성 (Thymeleaf)
    - th:text : 텍스트 출력
    - th:object : 폼 객체 바인딩
    - th:field : 폼 필드 바인딩
        * form user -> 객체 먼저 바인딩 시
        <form th:object="${user}">
            * *{ } -> 변수 바로 접근 가능 / ${user.username} 과 동일
            <input type="text" th:field="*{username}"/>
            <input type="text" th:field="*{name}"/>
            <input type="text" th:field="*{email}"/>
        </form>
        -> 유용한점
         : id, name 속성 자동 생성
        <form th:object="${user}">
            * *{ } -> 변수 바로 접근 가능 / ${user.username} 과 동일
            <input type="text" id="username" name="username" />
            <input type="text" id="name" name="name"/>
            <input type="text" id="email" name="email"/>
        </form>
    * th:if, th:unless : 조건부 렌더링
        <th:block th:if="${조건식}"> 조긴 참일때 출력</th:block>
        <th:block th:unless="${조건식}"> 조긴 거짓일때 출력</th:block>
        -> 자바로 먼저 조건식 확인 후 div 렌더링 작업
    * th:each : 반복문
        <th:block th:each="item, iterStat : ${리스트}">
            <p th:text="${iterStat.index} + ' : ' + ${item}"></p>
        </th:block>
        -> 리스트 : 배열, 컬렉션 등
        * iterStat 속성
         - index : 0부터 시작하는 인덱스
         - count : 1부터 시작하는 카운트
         - size : 전체 아이템 수
         - even : 짝수 여부 (boolean)
         - odd : 홀수 여부 (boolean)
         - first : 첫 번째 아이템 여부 (boolean)
         - last : 마지막 아이템 여부 (boolean)
         
## 응답처리
- void : 요청 경로와 동일한 뷰 이름 사용
- String : 뷰 이름 반환
- ModelAndView : 모델과 뷰 이름 함께 반환
- 클래스 : 객체를 JSON 형식으로 변환하여 응답
- 컬렉션 : 리스트를 JSON 형식으로 변환하여 응답
- ResponseEntity<T> : HTTP 응답 상태, 헤더, 바디 직접 제어
                    @ResponseBody 없어도 응답본문 직접 지정

* @ResponseBody : 반환값을 응답 본문에 직접 지정 (JSON 등으로 변환)
                클래스 또는 컬렉션 반환 시 사용

## 요청처리
- 주요 매개변수
    * 기본타입 + Wrapper 
        : @RequestParam("파라미터명") 매개변수명
    * 객체
        - 폼 데이터 : 자동 바인딩
        - JSON 데이터 : @RequestBody 매개변수명
    * 컬렉션
        - 이하 동일
    * 선언
        - 기본 생성자로 객체 생성 (setter 메서드로 값 설정)
    * HttpServletRequest : 요청 정보 직접 접근
    * HttpServletResponse : 응답 정보 직접 접근
    * HttpSession : 세션 정보 접근
    * @CookieValue : 쿠키 값 매핑

    폼 요청 처리
    - 일반 파라미터 : @RequestParam("파라미터명") 매개변수명
    - 멀티 파라미터 : @RequestParam("파라미터명") List<타입> 매개변수명
                     @RequestParam("파라미터명") 타입[] 매개변수명
    - 파일 업로드 : @RequestParam("파라미터명") MultipartFile 매개변수명
                   @RequestParam("파라미터명") List<MultipartFile> 매개변수명
                   * 파일 업로드 경로 설정
                   application.properites
                   1. spring.servlet.multipart.location=업로드경로 or
                   2. upload.path=업로드경로
                   * 파일 용량 설정
                   spring.servlet.multipart.max-file-size=1MB
                   spring.servlet.multipart.max-request-size=10MB
                   * 가져오기 (컨트롤러)
                   @Value("${upload.path}") String uploadPath
                   @Value("${spring.servlet.multipart.location}") String multipartLocation
    - 날짜 타입 : @DateTimeFormat(pattern="yyyy-MM-dd") 매개변수명
