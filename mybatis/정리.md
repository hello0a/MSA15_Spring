# log4j2
DB ì—ê²Œ ë³´ë‚´ëŠ” SQL ì¿¼ë¦¬ë¥¼ ì˜ˆì˜ê²Œ ì¶œë ¥í•´ì£¼ëŠ” ë„êµ¬

-> DB ì—ê²Œ ì–´ë–¤ SQL ë³´ëƒˆëŠ”ê°€?
-> ê°’ì´ ì–´ë–¤ ê²ƒì´ ë°”ì¸ë”©ë˜ì—ˆëŠ”ê°€?
-> ì¿¼ë¦¬ê°€ ì–¼ë§ˆë‚˜ ê±¸ë ¸ëŠ”ê°€?
ê°™ì´ ë³´ê¸° ì¢‹ë° ë¡œê¹…(ì¶œë ¥)í•´ì£¼ëŠ” ì¹­êµ¬!

ì™œ í•„ìš”í•œê°€
- ê°œë°œì—ì„œëŠ” DB ì— ì–¸ì œ ì–´ë–¤ ì¿¼ë¦¬ê°€ ì‹¤í–‰ë¬ëŠ”ì§€ê°€ ë§¤ìš° ì¤‘ìš”í•œë°,
    ê·¸ê±¸ ëˆˆìœ¼ë¡œ ë³´ë©´ì„œ ë²„ê·¸ ì¡ê±°ë‚˜ ì„±ëŠ¥ ì ê²€ ê°€ëŠ¥

ë¹„ìœ 
- ìŒì‹ì  ìš´ì˜í•˜ë‹¤ê³  ì¹˜ë©´
    "ê³ ê°ì´ ì–´ë–¤ ë©”ë‰´ë¥¼ ì£¼ë¬¸í–ˆê³ , ê·¸ê±¸ ì£¼ë°©ì— ì–´ë–»ê²Œ ì „ë‹¬í–ˆëŠ”ì§€"
  ì‹¤ì‹œê°„ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ëª¨ë‹ˆí„° í™”ë©´!

# P6Spy (í”¼ì‹ìŠ¤ìŠ¤íŒŒì´)
DB ì¿¼ë¦¬ ë¡œê¹…í•˜ëŠ” ë„êµ¬
- ìµœê·¼ ìŠ¤í”„ë§ ê°œë°œìë“¤ì´ ë” ìì£¼ ì“°ëŠ” íŠ¸ë Œë””í•œ ë°©ì‹!

ì™œ ë§ì´ ì“°ëŠ”ê°€
- ê°„ë‹¨í•œ ì„¤ì • / ê¹”ë”í•œ ì¶œë ¥ / spring ê¶í•© / ì»¤ë®¤ë‹ˆí‹° ë‹¤ìˆ˜ ì‚¬ìš©

ë¹„ìœ 
- ìŒì‹ì ì—ì„œ "ì£¼ë¬¸ ëª¨ë‹ˆí„°"ë¥¼ ìµœì‹  ë²„ì „ìœ¼ë¡œ ë°”ê¾¼ ëŠë‚Œ!

# Controller -> Service -> Mapper -> XML -> DB
ë¹„ìœ  (ì§œì¥ë©´ ì£¼ë¬¸)
1. Controller = ì£¼ë¬¸ ë°›ëŠ” ì•Œë°”
2. Service = ì£¼ë°©ì¥(ìš”ë¦¬ ë¡œì§)
3. Mapper = ì£¼ë°© ë³´ì¡°(ë ˆì‹œí”¼ ì—°ê²°)
4. XML = ì§„ì§œ ë ˆì‹œí”¼(SQL)
5. DB = ì¬ë£Œ ì°½ê³ 

Controller
- ì†ë‹˜(ì‚¬ìš©ì) ìš”ì²­ ë°›ì•„ì„œ Service ì—ê²Œ ì „ë‹¬
- ê²Œì‹œê¸€ ëª©ë¡ ë³´ì—¬ì¤˜!
@GetMapping("/board/list")
public String list(Model model) {
    List<Board> boards = service.list();
    model.addAttribute("boards", boards);
    return "board/list";
}

Service
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë‹´ë‹¹(ì‹¤ì œ ì¼ ì²˜ë¦¬í•˜ëŠ” ë‡Œ)
- í•„ìš”í•œ ë°ì´í„° ì²´í¬ / Mapper í˜¸ì¶œ / ë¡œì§ ì‹¤í–‰
public List<Board> list() {
    return mapper.list();
}

Mapper (ì¸í„°í˜ì´ìŠ¤)
- Service ê°€ SQL ëª°ë¼ë„ ë˜ë„ë¡ SQL ì´ë¦„ë§Œ í˜¸ì¶œí•˜ê²Œ í•˜ëŠ” ì¤‘ê°„ í†µë¡œ
- mapper.list() ë¶€ë¥´ë©´, XMLì˜ <select id="list"> ì‹¤í–‰!
List<Board> list();

Mapper XML (SQL íŒŒì¼)
- ì§„ì§œ SQL(ì¿¼ë¦¬) ì í˜€ ìˆëŠ” íŒŒì¼
<select id="list" resultType="Board">
    SELECT * FROM board ORDER BY created_at DESC
</select>

DB
- SQL ì‹¤í–‰í•´ì„œ ì‹¤ì œ ë°ì´í„° ì½ê³ /ì“°ëŠ” ê³³

ì „ì²´ íë¦„ í•œ ë°©ì— ì •ë¦¬!
[ì‚¬ìš©ì]
   â†“  (ê²Œì‹œê¸€ ëª©ë¡ ì£¼ì„¸ìš”!)
[Controller]
   â†“  (ì„œë¹„ìŠ¤ì•¼, ì²˜ë¦¬í•´!)
[Service]
   â†“  (Mapperì•¼, DBê°€ì ¸ì™€!)
[Mapper ì¸í„°í˜ì´ìŠ¤]
   â†“  (XMLì˜ í•´ë‹¹ SQL ì‹¤í–‰!)
[Mapper XML]
   â†“  (SELECT * FROM board ...)
[DB]
   â†“  (ë°ì´í„° ë°˜í™˜)
[Controller]
   â†“ (í™”ë©´ì— ë°ì´í„° ì „ë‹¬)
[ì‚¬ìš©ì í™”ë©´ì— ê²°ê³¼ ì¶œë ¥]

Controller ìš”ì²­ ë°›ê³  -> Service ì²˜ë¦¬í•˜ê³  -> Mapper ì—°ê²°í•˜ê³  -> XML ì´ SQL ì‹¤í–‰í•˜ê³  -> DB ê²°ê³¼ ì¤€ë‹¤!

# spring + MyBatis ì „ì²´ íë¦„ (ì´ˆë³´ììš©)
(ê²Œì‹œê¸€ ë“±ë¡ create ê¸°ì¤€)

- ì „ì²´ íë¦„ ê·¸ë¦¼
[Controller]
     â†“  (boardService.insert(board))
[Service]
     â†“  (boardMapper.insert(board))
[Mapper ì¸í„°í˜ì´ìŠ¤]
     â†“  (XMLì˜ <insert id="insert"> ì‹¤í–‰)
[Mapper XML]
     â†“  (INSERT INTO board ...)
[Database]

1. Controller (ìš”ì²­ ë°›ì•„ Service í˜¸ì¶œ)
  @PostMapping("/create")
  public String create(Board board) throws Exception {
      boolean result = boardService.insert(board);
      if (result) return "redirect:/board/list";
      return "redirect:/board/create?error";
  }
- í´ë¼ì´ì–¸íŠ¸ POST ìš”ì²­ (/board/create)
  - Controller ê°€ boardService.insert(board) í˜¸ì¶œ
  - ì„±ê³µ ì‹œ ëª©ë¡ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

2. Service (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬, Mapper í˜¸ì¶œ)
  @Override
  public boolean insert(Board board) throws Exception {
      int result = boardMapper.insert(board);
      return result > 0;
  }
- Controller ë¡œë¶€í„° ë°›ì€ Board ê°ì²´ -> Mapper ì—ê²Œ ì „ë‹¬
  - ë°˜í™˜ê°’(ì˜í–¥ë°›ì€ í–‰ ìˆ˜) ë°›ì•„ ì„±ê³µ/ì‹¤íŒ¨ íŒë‹¨
  - Service ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë„£ëŠ” ê³³!

3. Mapper ì¸í„°í˜ì´ìŠ¤ (MyBatis ì˜ ë©”ì„œë“œ ì„ ì–¸ë¶€)
  int insert(Board board) throws Exception;
- ì‹¤ì œ SQL ì—†ìŒ (XML ì—ì„œ ì—°ê²°)
  - ì´ë¦„ ê³¼ íŒŒë¼ë¯¸í„° ë§ìœ¼ë©´ MyBatis ê°€ ìë™ìœ¼ë¡œ XMl ì°¾ìŒ
  - ë©”ì„œë“œëª… = XML ì˜ id = "insert"

4. Mapper XML(ì‹¤ì œ SQL ì‹¤í–‰)
  <insert id="insert" parameterType="Board">
      INSERT INTO board (id, title, writer, content)
      VALUES (#{id}, #{title}, #{writer}, #{content})
  </insert>
- Mapper ì¸í„°í˜ì´ìŠ¤ì˜ insert() ì™€ ì—°ê²°
  - SQL ì‹¤í–‰!
  - MyBatis ê°€ #{ê°’} ë°”ì¸ë”©í•´ì„œ DBì— ì „ë‹¬

5. DB (ì‹¤ì œ í…Œì´ë¸”ì— ë°ì´í„° ì €ì¥)
- XML ì˜ SQL ì‹¤í–‰ë˜ì–´ DB ì— ë°ì´í„° ì €ì¥
- insert/update/delete ëŠ” ëª¨ë‘ ì—¬ê¸°ê°€ ìµœì¢… ëª©ì ì§€!

* í”„ë¡œì„¸ìŠ¤ ìµœì¢… ì •ë¦¬
ğŸ“Œ Controller
  - ì›¹ ìš”ì²­ ë°›ìŒ
  - í™”ë©´(view) ì´ë™ or Service í˜¸ì¶œ

ğŸ“Œ Service
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  - Mapper í˜¸ì¶œ

ğŸ“Œ Mapper Interface
  - SQL ë©”ì†Œë“œ ëª…ì„¸
  - XML SQLê³¼ ì—°ê²°ë¨

ğŸ“Œ Mapper XML
  - ì‹¤ì œ SQL ì‘ì„±

ğŸ“Œ DB
  - SQL ì‹¤í–‰ ê²°ê³¼ê°€ ë°˜ì˜ë¨

* ë‚˜ë¥¼ ìœ„í•œ ê·€ì—½ê³  ì‰¬ìš´ ë²„ì „
ğŸ§š Controller : "ìš”ì²­ ì™”ì–´ìš”~! Serviceì•¼, ì´ê±° ì²˜ë¦¬í•´ì¤˜!"
â†“
ğŸ› ï¸ Service : "ì˜¤ì¼€ì´! Mapperì•¼, SQL ì¢€ ë‚ ë ¤ì¤˜!"
â†“
ğŸ’¼ Mapper ì¸í„°í˜ì´ìŠ¤ : "ì•Œê² ìŒ! XMLí•œí…Œ ì „ë‹¬í•˜ê² ìŒ!"
â†“
ğŸ“œ XML(SQL) : "SQL ì‹¤í–‰í• ê²Œìš”~ DBì•¼ ì¤€ë¹„í•´!"
â†“
ğŸ’¾ DB : "ë°ì´í„° ì €ì¥ ì™„ë£Œ!"



